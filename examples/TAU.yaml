---
encoder:
   name: odb
   output: test_output.odb

source:
  name: multi-file
  paths:
    - test_data/TAU

preprocessing:
  #- match: (?P<dataset>test_data)/TAU/JerusalemLL(?P<index>\d+)
  - match: (?P<dataset>test_data)/TAU/Jerusalem^(?:(?!~\$).)+\.(?:csv?)$
    metadata:
      class: group
    parser:
      name: csv
      header: true
      metadata_columns:
        - title: time
          type: datetime
          identifying: true
          date_format: "%Y-%m-%dT%H:%M:%S%z"
          name: an
        - title: lon
          name: longitude
          unit: degN
        - title: lat
          name: latitude
          unit: degE
      value_columns:
        - title: Temp[째C]
          name: air_temperature
          unit: C
        - title: Press[mbar]
          name: barometric_pressure
          unit: mbar
        - title: Hum[%]
          name: relative_humidity
          unit: '%'
        - title: Alt[m]
          name: altitude
          unit: m
        - title: DP[째C]
          name: dewpoint_temperature
          unit: C
        - title: HDX[째C]
          name: HDX
          unit: C
        - title: Grad[째C/100m]
          name: temperature_lapse_rate
          unit: C/100m
        - title: Speed[km/h]
          name: speed
          unit: km/h
        - title: Solar[]
          name: light
          unit: NaN
